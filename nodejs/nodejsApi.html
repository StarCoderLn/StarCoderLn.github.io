<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>é¸µé¸Ÿè›‹çš„ä¸ªäººä¸»é¡µ</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="icon" href="/image/logo.jpg">
    <meta name="description" content="é¸µé¸Ÿè›‹çš„ä¸–ç•Œ">
    <link rel="preload" href="/assets/css/0.styles.22095322.css" as="style"><link rel="preload" href="/assets/js/app.83f3402d.js" as="script"><link rel="preload" href="/assets/js/2.a0a69aa9.js" as="script"><link rel="preload" href="/assets/js/16.31912b5c.js" as="script"><link rel="prefetch" href="/assets/js/10.439f342d.js"><link rel="prefetch" href="/assets/js/11.216a07f2.js"><link rel="prefetch" href="/assets/js/12.a66aca6c.js"><link rel="prefetch" href="/assets/js/13.f5f24ce3.js"><link rel="prefetch" href="/assets/js/14.32d895c9.js"><link rel="prefetch" href="/assets/js/15.623a8373.js"><link rel="prefetch" href="/assets/js/17.68031807.js"><link rel="prefetch" href="/assets/js/18.a66b9dd4.js"><link rel="prefetch" href="/assets/js/19.c3c1ad4e.js"><link rel="prefetch" href="/assets/js/20.67c9540c.js"><link rel="prefetch" href="/assets/js/21.722fe9fe.js"><link rel="prefetch" href="/assets/js/22.72f8f629.js"><link rel="prefetch" href="/assets/js/23.f730e8f1.js"><link rel="prefetch" href="/assets/js/24.9e67058b.js"><link rel="prefetch" href="/assets/js/25.81a3aeea.js"><link rel="prefetch" href="/assets/js/26.18ba7257.js"><link rel="prefetch" href="/assets/js/27.eee6c364.js"><link rel="prefetch" href="/assets/js/28.d2732972.js"><link rel="prefetch" href="/assets/js/29.d54fb216.js"><link rel="prefetch" href="/assets/js/3.8959ecef.js"><link rel="prefetch" href="/assets/js/30.e71f561f.js"><link rel="prefetch" href="/assets/js/31.4f56f5c3.js"><link rel="prefetch" href="/assets/js/32.4ecd4417.js"><link rel="prefetch" href="/assets/js/33.32d721bd.js"><link rel="prefetch" href="/assets/js/34.ab789bed.js"><link rel="prefetch" href="/assets/js/35.e2330e74.js"><link rel="prefetch" href="/assets/js/36.a4d7a3e2.js"><link rel="prefetch" href="/assets/js/37.ca9e6d12.js"><link rel="prefetch" href="/assets/js/38.8e7d9dae.js"><link rel="prefetch" href="/assets/js/39.818446de.js"><link rel="prefetch" href="/assets/js/4.bc08363f.js"><link rel="prefetch" href="/assets/js/40.6e5412c0.js"><link rel="prefetch" href="/assets/js/41.c046cc2c.js"><link rel="prefetch" href="/assets/js/42.3a98e5b0.js"><link rel="prefetch" href="/assets/js/43.c48084fd.js"><link rel="prefetch" href="/assets/js/44.9a68e6e8.js"><link rel="prefetch" href="/assets/js/45.607f9d7b.js"><link rel="prefetch" href="/assets/js/46.4fbd5727.js"><link rel="prefetch" href="/assets/js/47.ff6cd126.js"><link rel="prefetch" href="/assets/js/48.4e44b645.js"><link rel="prefetch" href="/assets/js/49.b3559737.js"><link rel="prefetch" href="/assets/js/5.247f2124.js"><link rel="prefetch" href="/assets/js/50.4c05ad25.js"><link rel="prefetch" href="/assets/js/51.27325a7b.js"><link rel="prefetch" href="/assets/js/52.62b7f674.js"><link rel="prefetch" href="/assets/js/53.fe6c2e96.js"><link rel="prefetch" href="/assets/js/54.68c91b01.js"><link rel="prefetch" href="/assets/js/55.a4e116a4.js"><link rel="prefetch" href="/assets/js/56.adec72d4.js"><link rel="prefetch" href="/assets/js/57.c8755c55.js"><link rel="prefetch" href="/assets/js/58.99e5de2f.js"><link rel="prefetch" href="/assets/js/59.f7deea0d.js"><link rel="prefetch" href="/assets/js/6.9cd44cad.js"><link rel="prefetch" href="/assets/js/60.608e9336.js"><link rel="prefetch" href="/assets/js/7.d1cbdc31.js"><link rel="prefetch" href="/assets/js/8.3e9a3d41.js"><link rel="prefetch" href="/assets/js/9.698ca62a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.22095322.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">é¸µé¸Ÿè›‹çš„ä¸ªäººä¸»é¡µ</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://starcoderln.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ä¸»é¡µ
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://www.github.com/StarCoderLn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://starcoderln.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ä¸»é¡µ
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://www.github.com/StarCoderLn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>VuePress</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>æœåŠ¡å™¨</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Nginx</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>PHP</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>å‡½æ•°å¼ç¼–ç¨‹</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>é¢å‘åˆ‡é¢ç¼–ç¨‹</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Linux</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Node.js</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/nodejs/nodejsStart.html" class="sidebar-link">Node.js å…¥é—¨</a></li><li><a href="/nodejs/nodejsApi.html" class="active sidebar-link">Node.js åŸºæœ¬ä½¿ç”¨</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/nodejs/nodejsApi.html#åˆ›å»ºä¸€ä¸ª-http-æœåŠ¡" class="sidebar-link">ğŸ–Š åˆ›å»ºä¸€ä¸ª http æœåŠ¡</a></li><li class="sidebar-sub-header"><a href="/nodejs/nodejsApi.html#repl-ç¯å¢ƒ" class="sidebar-link">ğŸ–Š REPL ç¯å¢ƒ</a></li><li class="sidebar-sub-header"><a href="/nodejs/nodejsApi.html#node-js-å›è°ƒæœºåˆ¶" class="sidebar-link">ğŸ–Š Node.js å›è°ƒæœºåˆ¶</a></li><li class="sidebar-sub-header"><a href="/nodejs/nodejsApi.html#node-js-äº‹ä»¶é©±åŠ¨æœºåˆ¶" class="sidebar-link">ğŸ–Š Node.js äº‹ä»¶é©±åŠ¨æœºåˆ¶</a></li><li class="sidebar-sub-header"><a href="/nodejs/nodejsApi.html#node-js-æ¨¡å—åŒ–" class="sidebar-link">ğŸ–Š Node.js æ¨¡å—åŒ–</a></li><li class="sidebar-sub-header"><a href="/nodejs/nodejsApi.html#node-js-å‡½æ•°" class="sidebar-link">ğŸ–Š Node.js å‡½æ•°</a></li><li class="sidebar-sub-header"><a href="/nodejs/nodejsApi.html#node-js-è·¯ç”±" class="sidebar-link">ğŸ–Š Node.js è·¯ç”±</a></li><li class="sidebar-sub-header"><a href="/nodejs/nodejsApi.html#node-js-å…¨å±€æ–¹æ³•å’Œå·¥å…·" class="sidebar-link">ğŸ–Š Node.js å…¨å±€æ–¹æ³•å’Œå·¥å…·</a></li><li class="sidebar-sub-header"><a href="/nodejs/nodejsApi.html#node-js-æ–‡ä»¶ç³»ç»Ÿ" class="sidebar-link">ğŸ–Š Node.js æ–‡ä»¶ç³»ç»Ÿ</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/nodejs/nodejsApi.html#æ–‡ä»¶åŸºæœ¬çŸ¥è¯†" class="sidebar-link">ğŸ“˜ æ–‡ä»¶åŸºæœ¬çŸ¥è¯†</a></li><li class="sidebar-sub-header"><a href="/nodejs/nodejsApi.html#æ–‡ä»¶åŸºæœ¬æ“ä½œ" class="sidebar-link">ğŸ“˜ æ–‡ä»¶åŸºæœ¬æ“ä½œ</a></li><li class="sidebar-sub-header"><a href="/nodejs/nodejsApi.html#æ–‡ä»¶ç›®å½•åŸºæœ¬æ“ä½œ" class="sidebar-link">ğŸ“˜ æ–‡ä»¶ç›®å½•åŸºæœ¬æ“ä½œ</a></li><li class="sidebar-sub-header"><a href="/nodejs/nodejsApi.html#ä¾‹å­" class="sidebar-link">ğŸ“˜ ä¾‹å­</a></li></ul></li><li class="sidebar-sub-header"><a href="/nodejs/nodejsApi.html#node-js-stream-æµ" class="sidebar-link">ğŸ–Š Node.js Stream(æµ)</a></li><li class="sidebar-sub-header"><a href="/nodejs/nodejsApi.html#node-js-net-æ¨¡å—" class="sidebar-link">ğŸ–Š Node.js net æ¨¡å—</a></li></ul></li><li><a href="/nodejs/express.html" class="sidebar-link">Node.js Express æ¡†æ¶</a></li><li><a href="/nodejs/koa.html" class="sidebar-link">Node.js Koa æ¡†æ¶</a></li><li><a href="/nodejs/nodejsYii.html" class="sidebar-link">å‰åç«¯ BFF æ¶æ„å®æˆ˜</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>å‰ç«¯å·¥ç¨‹åŒ–</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HTTP</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>æµè§ˆå™¨</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>æ€§èƒ½ä¼˜åŒ–</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>å‰ç«¯ç›‘æ§</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ç®—æ³•å­¦ä¹ æ€»ç»“</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Mac å¼€å‘ä½“éªŒä¼˜åŒ–</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p><a href="https://www.runoob.com/nodejs/nodejs-tutorial.html" target="_blank" rel="noopener noreferrer">Node.js æ•™ç¨‹<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="åˆ›å»ºä¸€ä¸ª-http-æœåŠ¡"><a href="#åˆ›å»ºä¸€ä¸ª-http-æœåŠ¡" class="header-anchor">#</a> ğŸ–Š åˆ›å»ºä¸€ä¸ª http æœåŠ¡</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// å®šä¹‰ HTTP å¤´</span>
    res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token string">'Content-Type'</span><span class="token operator">:</span> <span class="token string">'text/plain'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// å‘é€å“åº”çš„æ•°æ®</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'Hello World!\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">8000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// æœåŠ¡è¿è¡Œåè¾“å‡ºä¸€è¡Œä¿¡æ¯ï¼Œè¯æ˜æœåŠ¡å·²å¯åŠ¨</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'server is running...'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>å¯åŠ¨æœåŠ¡ä¹‹åï¼Œåœ¨æµè§ˆå™¨ä¸­è®¿é—® localhost:8000 å°±å¯ä»¥çœ‹åˆ°é¡µé¢ä¸Šæ˜¾ç¤º Hello World!ã€‚</p> <h2 id="repl-ç¯å¢ƒ"><a href="#repl-ç¯å¢ƒ" class="header-anchor">#</a> ğŸ–Š REPL ç¯å¢ƒ</h2> <p>Node.js çš„ REPL ç¯å¢ƒå°±æ˜¯æŒ‡å½“æˆ‘ä»¬åœ¨ç»ˆç«¯è¾“å…¥ node å‘½ä»¤å›è½¦ä¹‹åè¿›å…¥çš„ç¯å¢ƒã€‚</p> <p><img src="/assets/img/nodejs2.96aa790b.png" alt="nodejs" title="nodejs"></p> <p>åœ¨è¿™ä¸ªç¯å¢ƒä¸­å¯ä»¥æ­£å¸¸ç¼–å†™ä»£ç ã€‚é€€å‡ºè¿™ä¸ªç¯å¢ƒæœ‰ä¸‰ç§æ–¹å¼ï¼šæŒ‰ä¸¤æ¬¡ ctrl + c æˆ–è€…æ‰§è¡Œ .exit å‘½ä»¤æˆ–è€…æŒ‰ ctrl + dã€‚</p> <p><img src="/assets/img/nodejs3.c63eb260.png" alt="nodejs" title="nodejs"></p> <h2 id="node-js-å›è°ƒæœºåˆ¶"><a href="#node-js-å›è°ƒæœºåˆ¶" class="header-anchor">#</a> ğŸ–Š Node.js å›è°ƒæœºåˆ¶</h2> <p><strong>1. ä»€ä¹ˆæ˜¯å›è°ƒ</strong></p> <ul><li><p>å‡½æ•°è°ƒç”¨æ–¹å¼åˆ†ä¸ºä¸‰ç±»ï¼šåŒæ­¥è°ƒç”¨ã€å›è°ƒå’Œå¼‚æ­¥è°ƒç”¨ã€‚</p></li> <li><p>å›è°ƒæ˜¯ä¸€ç§åŒå‘è°ƒç”¨æ¨¡å¼ã€‚</p></li> <li><p>å¯ä»¥é€šè¿‡å›è°ƒå‡½æ•°æ¥å®ç°å›è°ƒã€‚</p></li></ul> <p><strong>2. é˜»å¡å’Œéé˜»å¡</strong></p> <ul><li><p>é˜»å¡å’Œéé˜»å¡å…³æ³¨çš„æ˜¯ç¨‹åºåœ¨ç­‰å¾…è°ƒç”¨ç»“æœï¼ˆæ¶ˆæ¯ï¼Œè¿”å›å€¼ï¼‰æ—¶çš„çŠ¶æ€ã€‚</p></li> <li><p>é˜»å¡å°±æ˜¯åšä¸å®Œä¸å‡†å›æ¥ã€‚</p></li> <li><p>éé˜»å¡å°±æ˜¯ä½ å…ˆåšï¼Œæˆ‘å…ˆçœ‹çœ‹æœ‰å…¶ä»–äº‹æ²¡æœ‰ï¼Œåšå®Œäº†å‘Šè¯‰æˆ‘ä¸€å£°ã€‚</p></li></ul> <p>é˜»å¡ä»£ç </p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// è¯»å–æ–‡ä»¶é˜»å¡æ—¶ä½¿ç”¨ readFileSync æ–¹æ³•ï¼Œéé˜»å¡ä½¿ç”¨ readFile() æ–¹æ³•</span>
<span class="token keyword">var</span> data <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'test.html'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// åŠ ä¸Š toString æ‰èƒ½å¤Ÿæ­£ç¡®è¾“å‡ºæ–‡ä»¶é‡Œçš„å†…å®¹è€Œä¸æ˜¯16è¿›åˆ¶ç </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>éé˜»å¡ä»£ç </p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> data <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'test.html'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// å®¹é”™å¤„ç†</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ç¨‹åºæ‰§è¡Œå®Œæ¯•ï¼'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>è¾“å‡ºç»“æœæ˜¯å…ˆè¾“å‡ºâ€œç¨‹åºæ‰§è¡Œå®Œæ¯•ï¼â€ï¼Œå†è¾“å‡ºæ–‡ä»¶å†…å®¹ï¼Œè¿™å°±ä½“ç°äº†éé˜»å¡ä»£ç çš„ç‰¹ç‚¹ã€‚</p> <h2 id="node-js-äº‹ä»¶é©±åŠ¨æœºåˆ¶"><a href="#node-js-äº‹ä»¶é©±åŠ¨æœºåˆ¶" class="header-anchor">#</a> ğŸ–Š Node.js äº‹ä»¶é©±åŠ¨æœºåˆ¶</h2> <p><a href="https://www.runoob.com/nodejs/nodejs-event-loop.html" target="_blank" rel="noopener noreferrer">Node.js äº‹ä»¶å¾ªç¯<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://www.runoob.com/nodejs/nodejs-event.html" target="_blank" rel="noopener noreferrer">Node.js EventEmitter<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><strong>1. äº‹ä»¶é©±åŠ¨æ¨¡å‹</strong></p> <p>è¦ç†è§£ä¸‹å›¾çš„äº‹ä»¶é©±åŠ¨æ¨¡å‹ï¼Œé¦–å…ˆè¦å…ˆæ˜ç™½ Node.js çš„è¿è¡Œæœºåˆ¶ã€‚</p> <ul><li><p>Node.js æœ¬èº«æ˜¯å•çº¿ç¨‹ã€å•è¿›ç¨‹çš„ï¼Œéœ€è¦é€šè¿‡äº‹ä»¶æˆ–è€…å›è°ƒæ¥å®ç°å¹¶å‘æ•ˆæœã€‚å› æ­¤ï¼ŒNode.js å› ä¸ºä¸åƒå¤šçº¿ç¨‹é‚£æ ·éœ€è¦åšå¾ˆå¤šé¢å¤–çš„å·¥ä½œï¼Œæ‰€ä»¥æ€§èƒ½æ¯”è¾ƒé«˜ã€‚</p></li> <li><p>Node.js ä¸­æ¯ä¸€ä¸ª api éƒ½æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ï¼Œå¹¶ä¸”æ˜¯å„è‡ªä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„çº¿ç¨‹åœ¨è¿è¡Œï¼Œä½¿ç”¨å¼‚æ­¥å‡½æ•°è°ƒç”¨æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨è¿™ç§æœºåˆ¶æ¥è¿›è¡Œå¹¶å‘å¤„ç†ã€‚Node.js ä¸­å‡ ä¹æ‰€æœ‰çš„äº‹ä»¶æœºåˆ¶éƒ½æ˜¯ä¾æ®è§‚å¯Ÿè€…æ¨¡å¼æ¥æ˜¯å®ç°çš„ã€‚</p></li></ul> <p><img src="/assets/img/nodejs4.5cfb65aa.png" alt="nodejs" title="nodejs"></p> <p>è¿™ä¸ªæ¨¡å‹ä¹Ÿå«åšéé˜»å¡æ—¶ IO æˆ– äº‹ä»¶é©±åŠ¨çš„ IO æ¨¡å‹ã€‚</p> <p><strong>2. äº‹ä»¶å¤„ç†ä»£ç æµç¨‹</strong></p> <p>ï¼ˆ1ï¼‰å¼•å…¥ <code>events</code> å¯¹è±¡ï¼Œåˆ›å»º <code>eventEmitter</code> å¯¹è±¡ã€‚</p> <p>ï¼ˆ2ï¼‰ç»‘å®šäº‹ä»¶å¤„ç†ç¨‹åºã€‚</p> <p>ï¼ˆ3ï¼‰è§¦å‘äº‹ä»¶ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// å¼•å…¥ events æ¨¡å—å¹¶åˆ›å»º eventEmitter å¯¹è±¡</span>
<span class="token keyword">var</span> events <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'events'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> eventEmitter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">events<span class="token punctuation">.</span>EventEmitter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ç»‘å®šäº‹ä»¶å¤„ç†å‡½æ•°</span>
<span class="token keyword">var</span> <span class="token function-variable function">connectHandler</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">connected</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'connected è¢«è°ƒç”¨ï¼'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
eventEmitter<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'connection'</span><span class="token punctuation">,</span> connectHandler<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å®Œæˆäº‹ä»¶ç»‘å®š</span>

<span class="token comment">// è§¦å‘äº‹ä»¶</span>
eventEmitter<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'connection'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ç¨‹åºæ‰§è¡Œå®Œæ¯•ï¼'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="node-js-æ¨¡å—åŒ–"><a href="#node-js-æ¨¡å—åŒ–" class="header-anchor">#</a> ğŸ–Š Node.js æ¨¡å—åŒ–</h2> <p><a href="https://www.runoob.com/nodejs/nodejs-module-system.html" target="_blank" rel="noopener noreferrer">Node.jsæ¨¡å—ç³»ç»Ÿ<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><strong>1. æ¨¡å—åŒ–çš„æ¦‚å¿µå’Œæ„ä¹‰</strong></p> <ul><li><p>ä¸ºäº†è®© Node.js çš„æ–‡ä»¶å¯ä»¥ç›¸äº’è°ƒç”¨ï¼ŒNode.js æä¾›äº†ä¸€ä¸ªç®€å•çš„æ¨¡å—ç³»ç»Ÿã€‚</p></li> <li><p>æ¨¡å—æ˜¯ Node.js åº”ç”¨ç¨‹åºçš„åŸºæœ¬ç»„æˆéƒ¨åˆ†ã€‚</p></li> <li><p><strong>æ–‡ä»¶å’Œæ¨¡å—æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚ä¸€ä¸ª Node.js æ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—</strong>ã€‚</p></li> <li><p>è¿™ä¸ªæ–‡ä»¶å¯èƒ½æ˜¯ JavaScript ä»£ç ã€JSON æˆ–è€…ç¼–è¯‘è¿‡çš„ C/C++ æ‰©å±•ã€‚</p></li> <li><p>Node.js å­˜åœ¨4ç±»æ¨¡å—ï¼ˆ<strong>åŸç”Ÿæ¨¡å—å’Œ3ç§æ–‡ä»¶æ¨¡å—</strong>ï¼‰ã€‚</p></li></ul> <p><strong>2. Node.js æ¨¡å—åŠ è½½æµç¨‹</strong></p> <p><img src="/assets/img/nodejs5.256bd334.png" alt="nodejs" title="nodejs"></p> <p><strong>3. Node.js çš„æ¨¡å—åŠ è½½æ–¹å¼</strong></p> <ul><li><p>ä»æ–‡ä»¶æ¨¡å—ç¼“å­˜åŒºä¸­åŠ è½½ã€‚</p></li> <li><p>ä»æ–‡ä»¶ä¸­åŠ è½½ã€‚</p></li> <li><p>ä»åŸç”Ÿæ¨¡å—ç¼“å­˜åŒºä¸­åŠ è½½ã€‚</p></li> <li><p>ä»åŸç”Ÿæ¨¡å—ä¸­åŠ è½½ã€‚</p></li></ul> <p><strong>4. require æ–¹æ³•åŠ è½½æ¨¡å—</strong></p> <p>require æ–¹æ³•æ¥å—ä»¥ä¸‹å‡ ç§å‚æ•°çš„ä¼ é€’ï¼š</p> <ul><li><p>httpã€fsã€path ç­‰åŸç”Ÿæ¨¡å—ã€‚</p></li> <li><p>./mod æˆ– ../modï¼Œç›¸å¯¹è·¯å¾„çš„æ–‡ä»¶æ¨¡å—ã€‚</p></li> <li><p>/pathtomodule/modï¼Œç»å¯¹è·¯å¾„çš„æ–‡ä»¶æ¨¡å—ã€‚</p></li> <li><p>modï¼ŒéåŸç”Ÿæ¨¡å—çš„æ–‡ä»¶æ¨¡å—ã€‚</p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// test.js</span>
<span class="token keyword">function</span> <span class="token function">Hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">setName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">argName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        name <span class="token operator">=</span> argName<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">sayHello</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Hello '</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> Hello<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// main.js</span>
<span class="token keyword">var</span> Hello <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./test'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

hello <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
hello<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">'Shen Zhen'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
hello<span class="token punctuation">.</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="node-js-å‡½æ•°"><a href="#node-js-å‡½æ•°" class="header-anchor">#</a> ğŸ–Š Node.js å‡½æ•°</h2> <p><strong>1. å‡½æ•°æ¦‚å¿µ</strong></p> <ul><li><p>åœ¨ JavaScript ä¸­ï¼Œä¸€ä¸ªå‡½æ•°å¯ä»¥ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„å‚æ•°ã€‚</p></li> <li><p>æˆ‘ä»¬å¯ä»¥å…ˆå®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œç„¶åä¼ é€’ï¼Œä¹Ÿå¯ä»¥åœ¨ä¼ é€’å‚æ•°çš„åœ°æ–¹ç›´æ¥å®šä¹‰å‡½æ•°ã€‚</p></li> <li><p>Node.js ä¸­å‡½æ•°çš„ä½¿ç”¨ä¸ JavaScript ç±»ä¼¼ã€‚</p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token parameter">word</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>word<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token parameter">someFunction<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">someFunction</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">execute</span><span class="token punctuation">(</span>say<span class="token punctuation">,</span> <span class="token string">'Hello'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token parameter">someFunction<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">someFunction</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">execute</span><span class="token punctuation">(</span>
    <span class="token keyword">function</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token parameter">word</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>word<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token punctuation">}</span><span class="token punctuation">,</span> 
    <span class="token string">'Hello'</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="node-js-è·¯ç”±"><a href="#node-js-è·¯ç”±" class="header-anchor">#</a> ğŸ–Š Node.js è·¯ç”±</h2> <p><a href="https://www.runoob.com/nodejs/nodejs-router.html" target="_blank" rel="noopener noreferrer">Node.js è·¯ç”±<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>ä¸‹é¢çš„ä¾‹å­å±•ç¤ºäº†å¦‚ä½•æ ¹æ®è®¿é—®ä¸åŒçš„è·¯ç”±æ¥åšä¸åŒçš„äº‹æƒ…ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// http.js</span>
<span class="token keyword">var</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;http&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> url <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;url&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token keyword">function</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token parameter">route</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">onRequest</span><span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> pathname <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">.</span>pathname<span class="token punctuation">;</span>
    <span class="token function">route</span><span class="token punctuation">(</span>pathname<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
 
  http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span>onRequest<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">8888</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Server has started.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
exports<span class="token punctuation">.</span>start <span class="token operator">=</span> start<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// router.js</span>
<span class="token keyword">function</span> <span class="token function">route</span><span class="token punctuation">(</span><span class="token parameter">pathname<span class="token punctuation">,</span> response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>pathname <span class="token operator">==</span> <span class="token string">'/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        response<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">&quot;Content-Type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text/plain&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        response<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        response<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>pathname <span class="token operator">==</span> <span class="token string">'/index/home'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        response<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'/index/home'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        response<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'404'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
   
exports<span class="token punctuation">.</span>route <span class="token operator">=</span> route<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// app.js</span>
<span class="token keyword">var</span> server <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./http&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> router <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./router&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
server<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span>router<span class="token punctuation">.</span>route<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>è·¯ç”±æœ‰ get/post è¯·æ±‚ï¼Œå¹¶ä¸”è¿™ä¸¤ç§è¯·æ±‚è¿”å›çš„ç»“æœæ˜¯ä¸ä¸€æ ·çš„ã€‚<a href="https://www.runoob.com/nodejs/node-js-get-post.html" target="_blank" rel="noopener noreferrer">Node.js GET/POSTè¯·æ±‚<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="node-js-å…¨å±€æ–¹æ³•å’Œå·¥å…·"><a href="#node-js-å…¨å±€æ–¹æ³•å’Œå·¥å…·" class="header-anchor">#</a> ğŸ–Š Node.js å…¨å±€æ–¹æ³•å’Œå·¥å…·</h2> <p><a href="https://www.runoob.com/nodejs/nodejs-global-object.html" target="_blank" rel="noopener noreferrer">Node.js å…¨å±€å¯¹è±¡<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://www.runoob.com/nodejs/nodejs-util.html" target="_blank" rel="noopener noreferrer">Node.js å¸¸ç”¨å·¥å…·<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>æ¨èä¸€ä¸ªå¾ˆå…¨çš„ JavaScript å·¥å…·åº“ï¼š<a href="https://underscorejs.bootcss.com/" target="_blank" rel="noopener noreferrer">Underscore.js<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ï¼Œå®ƒæä¾›äº†100å¤šä¸ªå‡½æ•°ã€‚</p> <h2 id="node-js-æ–‡ä»¶ç³»ç»Ÿ"><a href="#node-js-æ–‡ä»¶ç³»ç»Ÿ" class="header-anchor">#</a> ğŸ–Š Node.js æ–‡ä»¶ç³»ç»Ÿ</h2> <p><a href="https://www.runoob.com/nodejs/nodejs-fs.html" target="_blank" rel="noopener noreferrer">Node.js æ–‡ä»¶ç³»ç»Ÿ<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://www.runoob.com/nodejs/nodejs-buffer.html" target="_blank" rel="noopener noreferrer">Node.js Buffer(ç¼“å†²åŒº)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>åº”ç”¨åœºæ™¯ï¼šæ¯”å¦‚è¦åšä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ ç³»ç»Ÿçš„æ—¶å€™å°±éœ€è¦ç”¨åˆ° fsã€‚</p> <h3 id="æ–‡ä»¶åŸºæœ¬çŸ¥è¯†"><a href="#æ–‡ä»¶åŸºæœ¬çŸ¥è¯†" class="header-anchor">#</a> ğŸ“˜ æ–‡ä»¶åŸºæœ¬çŸ¥è¯†</h3> <ul><li><p><strong>æ–‡ä»¶æƒé™ä½ mode</strong></p> <p><a href="https://www.runoob.com/linux/linux-file-attr-permission.html" target="_blank" rel="noopener noreferrer">Linux æ–‡ä»¶åŸºæœ¬å±æ€§<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>windows æ–‡ä»¶é»˜è®¤å¯è¯»å¯å†™ä¸å¯æ‰§è¡Œï¼Œ0o666</p></li> <li><p><strong>æ–‡ä»¶æ ‡è¯†ä½ flag</strong></p> <p>r: è¯»å–</p> <p>w: å†™å…¥</p> <p>s: åŒæ­¥</p> <p>+: å¢åŠ ç›¸åæ“ä½œ</p> <p>x: æ’å®ƒæ–¹å¼</p></li></ul> <p><img src="/assets/img/nodejs6.d99acf3b.png" alt="nodejs" title="nodejs"></p> <ul><li><p><strong>æ–‡ä»¶æè¿°ç¬¦ fd</strong></p> <p>Node.js ä¸­çš„æ–‡ä»¶æè¿°ç¬¦ä¸ºäº†æŠ½è±¡ä¸åŒæ“ä½œç³»ç»Ÿé—´çš„å·®å¼‚ï¼Œé€šè¿‡æ•°å€¼çš„æ–¹å¼æ¥åˆ†é…ï¼Œé€’å¢çš„ï¼Œå¹¶ä¸”æ˜¯ä»3å¼€å§‹çš„ï¼Œå› ä¸º0ã€1ã€2åˆ†åˆ«è¢« process.stdinã€process.stdoutã€process.stderr å ç”¨äº†ã€‚</p> <p>æ–‡ä»¶æè¿°ç¬¦æ˜¯ä¸€ä¸ªæ–‡ä»¶çš„å”¯ä¸€æ ‡è¯†ã€‚</p></li></ul> <h3 id="æ–‡ä»¶åŸºæœ¬æ“ä½œ"><a href="#æ–‡ä»¶åŸºæœ¬æ“ä½œ" class="header-anchor">#</a> ğŸ“˜ æ–‡ä»¶åŸºæœ¬æ“ä½œ</h3> <p><strong>1. æ–‡ä»¶è¯»å–</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> buf <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'test.html'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> encoding<span class="token operator">:</span> <span class="token string">'utf-8'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'test.html'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> encoding<span class="token operator">:</span> <span class="token string">'utf-8'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>readFile / readFileSync ä¼šä¸€æ¬¡æ€§å°†æ‰€æœ‰æ–‡ä»¶å†…å®¹è¯»å–åˆ°ç¼“å­˜ä¸­ï¼Œå¦‚æœæ–‡ä»¶è¿‡å¤§ï¼Œç¼“å­˜ä¸è¶³æ—¶ï¼Œå°±å¯èƒ½ä¼šå‡ºç°æ–‡ä»¶å†…å®¹ä¸¢å¤±çš„æƒ…å†µã€‚å› æ­¤ï¼Œå¯¹äºå¤§æ–‡ä»¶ï¼Œä¸€èˆ¬ä¸æ¨èä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œè€Œæ˜¯ä½¿ç”¨ read æ–¹æ³•å¤šæ¬¡è¯»å–åˆ° buffer ä¸­ã€‚</p> <p><img src="/assets/img/nodejs7.c4862016.png" alt="nodejs" title="nodejs"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> buf <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">alloc</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

fs<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'data.txt'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> fd</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// ä¸€ä¸ªæ±‰å­—3ä¸ªå­—èŠ‚</span>
    fs<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>fd<span class="token punctuation">,</span> buf<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> bytesRead<span class="token punctuation">,</span> buffer</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bytesRead<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å®é™…è¯»å–çš„å­—èŠ‚æ•°</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>buffer<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å®é™…è¯»å–çš„å†…å®¹</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>2. æ–‡ä»¶å†™å…¥</strong></p> <ul><li>æ™®é€šå†™å…¥ï¼šåé¢å†™å…¥çš„å†…å®¹ä¼šè¦†ç›–æ‰å·²æœ‰çš„å†…å®¹ã€‚</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span><span class="token string">'data.txt'</span><span class="token punctuation">,</span> <span class="token string">'åŒæ­¥å†™å…¥'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">'data.txt'</span><span class="token punctuation">,</span> <span class="token string">'å†™å…¥çš„å†…å®¹'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> encoding<span class="token operator">:</span> <span class="token string">'utf-8'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>è¿½åŠ å†™å…¥ï¼šåé¢å†™å…¥çš„å†…å®¹è¿½åŠ åˆ°å·²æœ‰å†…å®¹ä¹‹åã€‚</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
fs<span class="token punctuation">.</span><span class="token function">appendFileSync</span><span class="token punctuation">(</span><span class="token string">'data.txt'</span><span class="token punctuation">,</span> <span class="token string">'è¿½åŠ å†™å…¥'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
fs<span class="token punctuation">.</span><span class="token function">appendFile</span><span class="token punctuation">(</span><span class="token string">'data.txt'</span><span class="token punctuation">,</span> <span class="token string">'è¿½åŠ å†™å…¥'</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>æ‹·è´å†™å…¥ï¼šæ‹·è´ä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹åˆ°å¦ä¸€ä¸ªæ–‡ä»¶é‡Œã€‚</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
fs<span class="token punctuation">.</span><span class="token function">copyFileSync</span><span class="token punctuation">(</span><span class="token string">'data.txt'</span><span class="token punctuation">,</span> <span class="token string">'datacopy.txt'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
fs<span class="token punctuation">.</span><span class="token function">copyFile</span><span class="token punctuation">(</span><span class="token string">'data.txt'</span><span class="token punctuation">,</span> <span class="token string">'datacopy.txt'</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>ç”¨è¯»å†™æ“ä½œæ¨¡æ‹Ÿæ‹·è´æ–‡ä»¶</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">copy</span><span class="token punctuation">(</span><span class="token parameter">file<span class="token punctuation">,</span> target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> data <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
    fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">copy</span><span class="token punctuation">(</span><span class="token string">'data.txt'</span><span class="token punctuation">,</span> <span class="token string">'data1.txt'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>å¤šæ¬¡å†™å…¥ write</li></ul> <p><img src="/assets/img/nodejs8.f06e4a57.png" alt="nodejs" title="nodejs"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> buf <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'æ·±åœ³å¤§å­¦'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

fs<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'data.txt'</span><span class="token punctuation">,</span> <span class="token string">'r+'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> fd</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    fs<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>fd<span class="token punctuation">,</span> buf<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> size<span class="token punctuation">,</span> buf</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        fs<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>fd<span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'å†™å…¥æˆåŠŸï¼Œå…³é—­æ–‡ä»¶ï¼'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>3. æ‰“å¼€æ–‡ä»¶</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// æ‰“å°çš„æ–‡ä»¶æè¿°ç¬¦æ˜¯é€’å¢çš„</span>
fs<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'data.txt'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> fd</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fd<span class="token punctuation">)</span><span class="token punctuation">;</span>
    fs<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'data1.txt'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> fd</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fd<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>4. å…³é—­æ–‡ä»¶</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>fs<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'data.txt'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> fd</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    fs<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>fd<span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'å…³é—­æˆåŠŸï¼'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>5. åˆ é™¤æ–‡ä»¶</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>fs<span class="token punctuation">.</span><span class="token function">unlinkSync</span><span class="token punctuation">(</span><span class="token string">'data.txt'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>fs<span class="token punctuation">.</span><span class="token function">unlink</span><span class="token punctuation">(</span><span class="token string">'data.txt'</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="æ–‡ä»¶ç›®å½•åŸºæœ¬æ“ä½œ"><a href="#æ–‡ä»¶ç›®å½•åŸºæœ¬æ“ä½œ" class="header-anchor">#</a> ğŸ“˜ æ–‡ä»¶ç›®å½•åŸºæœ¬æ“ä½œ</h3> <p><strong>1. æŸ¥çœ‹ç›®å½•æƒé™</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
    fs<span class="token punctuation">.</span><span class="token function">accessSync</span><span class="token punctuation">(</span><span class="token string">'./'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'å¯è¯»å¯å†™'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ä¸å¯è®¿é—®'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>fs<span class="token punctuation">.</span><span class="token function">access</span><span class="token punctuation">(</span><span class="token string">'./'</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ä¸å¯è®¿é—®'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'å¯è¯»å¯å†™'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>2. è·å–æ–‡ä»¶ç›®å½•çš„ä¿¡æ¯</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> file <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">statSync</span><span class="token punctuation">(</span><span class="token string">'dir/dir.txt'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> file <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">stat</span><span class="token punctuation">(</span><span class="token string">'dir/dir.txt'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>3. åˆ›å»ºç›®å½•</strong></p> <p><img src="/assets/img/nodejs9.c3e62741.png" alt="nodejs" title="nodejs"></p> <p>åˆ›å»ºç›®å½•æ—¶éœ€è¦æ³¨æ„çš„ä¸€ç‚¹å°±æ˜¯è¦ä¿è¯åˆ›å»ºçš„ç›®å½•çš„ä¸Šä¸€çº§ç›®å½•æ˜¯å­˜åœ¨çš„ï¼Œæ¯”å¦‚è¿™é‡Œçš„ dir ç›®å½•å¿…é¡»å­˜åœ¨ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚</p> <p>æˆ‘ä»¬ä¹Ÿå¯ä»¥æ·»åŠ  recursive: true å‚æ•°ï¼Œä¸ç®¡åˆ›å»ºçš„ç›®å½• dir æ˜¯å¦å­˜åœ¨ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>fs<span class="token punctuation">.</span><span class="token function">mkdirSync</span><span class="token punctuation">(</span><span class="token string">'dir/a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>fs<span class="token punctuation">.</span><span class="token function">mkdir</span><span class="token punctuation">(</span><span class="token string">'dir/a'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> recursive<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>4. è¯»å–ç›®å½•</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fs<span class="token punctuation">.</span><span class="token function">readdirSync</span><span class="token punctuation">(</span><span class="token string">'dir/a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// []</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>fs<span class="token punctuation">.</span><span class="token function">readdir</span><span class="token punctuation">(</span><span class="token string">'dir/a'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> files</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>5. åˆ é™¤ç›®å½•</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>fs<span class="token punctuation">.</span><span class="token function">rmdirSync</span><span class="token punctuation">(</span><span class="token string">'dir2/a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>fs<span class="token punctuation">.</span><span class="token function">rmdir</span><span class="token punctuation">(</span><span class="token string">'dir2/a'</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="ä¾‹å­"><a href="#ä¾‹å­" class="header-anchor">#</a> ğŸ“˜ ä¾‹å­</h3> <p>é…åˆ promise å’Œ async/await è¯»å–ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œå¹¶è¿›è¡Œæ“ä½œã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">getFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> filePath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./dir'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        fs<span class="token punctuation">.</span><span class="token function">readdir</span><span class="token punctuation">(</span>filePath<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> files</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> fileArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            files<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">fileName</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                fileArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/dir/'</span> <span class="token operator">+</span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span>fileArr<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getFilePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">insertDB</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">getFilePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// åœ¨è¿™é‡Œå¯ä»¥åšä¸€äº›å­˜è¿›æ•°æ®åº“çš„æ“ä½œ</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">insertDB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h2 id="node-js-stream-æµ"><a href="#node-js-stream-æµ" class="header-anchor">#</a> ğŸ–Š Node.js Stream(æµ)</h2> <p><a href="https://www.runoob.com/nodejs/nodejs-stream.html" target="_blank" rel="noopener noreferrer">Node.js Stream(æµ)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><strong>1. ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æµï¼Ÿ</strong></p> <p>æµæ˜¯é€å—ï¼ˆchunkï¼‰è¯»å–æ•°æ®çš„ï¼Œé€‚åˆè¯»å–å¤§æ•°æ®é‡çš„å¤§æ–‡ä»¶ã€‚å› æ­¤ï¼Œèƒ½å¤Ÿæé«˜å†…å­˜æ•ˆç‡å’Œæ—¶é—´æ•ˆç‡ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// åˆ›å»ºå¯è¯»æµ</span>
<span class="token keyword">const</span> rs <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createReadStream</span><span class="token punctuation">(</span><span class="token string">'demo.mp4'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// åˆ›å»ºå¯å†™æµ</span>
<span class="token keyword">const</span> ws <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createWriteStream</span><span class="token punctuation">(</span><span class="token string">'copt.mp4'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

rs<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">,</span> <span class="token parameter">chunk</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    ws<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>chunk<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

rs<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    ws<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>ä½†æ˜¯ä¸Šé¢è¿™æ®µä»£ç å¯èƒ½ä¼šæœ‰é—®é¢˜ï¼Œå› ä¸ºå¯è¯»æµå’Œå¯å†™æµçš„é€Ÿåº¦å¯èƒ½ä¸ä¸€è‡´ï¼Œæ¯”å¦‚ç°åœ¨å·²ç»è¯»å–äº†200Mçš„æ•°æ®ï¼Œç›®å‰åªå†™å…¥äº†100Mçš„æ•°æ®ï¼Œä½†æ˜¯è¯»å–è¿˜æ˜¯åœ¨è¿›è¡Œï¼Œå°±å¯èƒ½ä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±ã€‚æ­£å¸¸çš„æ“ä½œåº”è¯¥æ˜¯è¯»å–ä¸€æ®µå†™å®Œåï¼Œå†è¯»å–ä¸‹ä¸€æ®µã€‚æ‰€ä»¥ï¼Œä¸ºäº†ä¿æŒè¯»å†™é€Ÿåº¦ä¸€è‡´ï¼Œéœ€è¦ç”¨åˆ°<strong>ç®¡é“æµ pipe</strong>ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// åˆ›å»ºå¯è¯»æµ</span>
<span class="token keyword">const</span> rs <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createReadStream</span><span class="token punctuation">(</span><span class="token string">'demo.mp4'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// åˆ›å»ºå¯å†™æµ</span>
<span class="token keyword">const</span> ws <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createWriteStream</span><span class="token punctuation">(</span><span class="token string">'copt.mp4'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// pipe åªæ˜¯å¯è¯»æµçš„æ–¹æ³•ï¼Œæ‰€ä»¥ä¸èƒ½è¿™ä¹ˆç”¨ ws.pipe(rs);</span>
rs<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>ws<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>2. æµçš„ç±»å‹</strong></p> <ul><li><p>å¯è¯»æµ Readable</p></li> <li><p>å¯å†™æµ Writable</p></li> <li><p>åŒå·¥æµ Duplex</p></li> <li><p>è½¬æ¢æµ Transform</p></li></ul> <p><strong>æ‰€æœ‰çš„ Stream å¯¹è±¡éƒ½æ˜¯ EventEmitter çš„å®ä¾‹</strong>ã€‚å¸¸ç”¨çš„äº‹ä»¶å¦‚ä¸‹ï¼š</p> <ul><li><p>data - å½“æœ‰æ•°æ®å¯è¯»æ—¶è§¦å‘ã€‚</p></li> <li><p>end - æ²¡æœ‰æ›´å¤šçš„æ•°æ®å¯è¯»æ—¶è§¦å‘ã€‚</p></li> <li><p>error - åœ¨æ¥æ”¶å’Œå†™å…¥è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯æ—¶è§¦å‘ã€‚</p></li> <li><p>finish - æ‰€æœ‰æ•°æ®å·²è¢«å†™å…¥åˆ°åº•å±‚ç³»ç»Ÿæ—¶è§¦å‘ã€‚</p></li></ul> <p><strong>3. ä¾‹å­æ¼”ç¤º</strong></p> <p>ï¼ˆ1ï¼‰æµçš„ç¼“å†²åŒºé»˜è®¤æ˜¯<strong>16k(1kï¼ˆKBï¼‰ ç­‰äº 1024 å­—èŠ‚ï¼ˆBï¼‰)</strong>ï¼Œè¿™ä¸ªå¤§å°å¯ä»¥é€šè¿‡ highWaterMark æ¥æ”¹ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// åˆ›å»ºå¯è¯»æµ</span>
<span class="token keyword">const</span> rs <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createReadStream</span><span class="token punctuation">(</span><span class="token string">'data.txt'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    encoding<span class="token operator">:</span> <span class="token string">'utf-8'</span><span class="token punctuation">,</span> <span class="token comment">// è®¾ç½®ç¼–ç æ ¼å¼</span>
    highWaterMark<span class="token operator">:</span> <span class="token number">6</span> <span class="token comment">// è®¾ç½®ç¼“å†²åŒºå¤§å°ï¼Œå•ä½æ˜¯å­—èŠ‚ bytes</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

rs<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">,</span> <span class="token parameter">chunk</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>chunk<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

rs<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'è¯»å–å®Œæ¯•ï¼'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p> <p><img src="/assets/img/nodejs10.5992a1d2.png" alt="nodejs" title="nodejs"></p> <p>å¯ä»¥çœ‹åˆ°ï¼Œè¯»å–äº†ä¸¤æ¬¡ï¼Œæ¯æ¬¡è¯»å–ä¸¤ä¸ªæ±‰å­—ï¼Œå…±6ä¸ªå­—èŠ‚ã€‚</p> <p>ï¼ˆ2ï¼‰ç›‘å¬å¸¸è§çš„äº‹ä»¶ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// åˆ›å»ºå¯è¯»æµ</span>
<span class="token keyword">const</span> rs <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createReadStream</span><span class="token punctuation">(</span><span class="token string">'data.txt'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    encoding<span class="token operator">:</span> <span class="token string">'utf-8'</span><span class="token punctuation">,</span>
    highWaterMark<span class="token operator">:</span> <span class="token number">6</span> <span class="token comment">// è®¾ç½®ç¼“å†²åŒºå¤§å°ï¼Œå•ä½æ˜¯å­—èŠ‚ bytes</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

rs<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'open'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æ‰“å¼€æ–‡ä»¶'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

rs<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">,</span> <span class="token parameter">chunk</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>chunk<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

rs<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'è¯»å–å®Œæ¯•ï¼'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

rs<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'è¯»å–å‡ºé”™ï¼'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

rs<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'close'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'å…³é—­æ–‡ä»¶'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>ï¼ˆ3ï¼‰å¯è¯»æµæœ‰ä¸¤ç§æ¨¡å¼ï¼šè‡ªåŠ¨æµåŠ¨ï¼ˆflowing æ¨¡å¼ï¼‰æ‰‹åŠ¨æµåŠ¨ï¼ˆpaused æ¨¡å¼ï¼‰ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// è‡ªåŠ¨æµåŠ¨æ¨¡å¼</span>
<span class="token comment">// è§¦å‘è‡ªåŠ¨æµåŠ¨æ¨¡å¼çš„æ–¹æ³•æœ‰ï¼šç›‘å¬ data äº‹ä»¶ã€rs.resume()ã€rs.pipe()</span>
rs<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">,</span> <span class="token parameter">chunk</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>chunk<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// æ‰‹åŠ¨æµåŠ¨æ¨¡å¼</span>
<span class="token comment">// è§¦å‘æ‰‹åŠ¨æµåŠ¨æ¨¡å¼çš„æ–¹æ³•æœ‰ï¼šç›‘å¬ readable äº‹ä»¶ï¼Œå¹¶ä¸”æ¯æ¬¡éƒ½éœ€è¦æ‰‹åŠ¨è°ƒç”¨ read æ–¹æ³•è¯»å–ï¼›rs.pause()</span>
<span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
rs<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'readable'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>chunk <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        data <span class="token operator">+=</span> chunk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>ï¼ˆ4ï¼‰å¯è¯»æµå®Œæˆç›‘å¬ <code>end</code> äº‹ä»¶ï¼›å¯å†™æµå®Œæˆç›‘å¬ <code>finish</code> äº‹ä»¶ï¼Œå¹¶ä¸”ç”¨ <code>ws.end()</code> æ¥æ ‡è®°æ–‡ä»¶æœ«å°¾ã€‚</p> <p>ï¼ˆ5ï¼‰è®¾ç½®ç¼–ç æ ¼å¼æ—¶ï¼Œé™¤äº†éƒ½å¯ä»¥åœ¨åˆ›å»ºæµçš„æ—¶å€™è®¾ç½®ä¹‹å¤–ï¼Œå¯è¯»æµè¿˜å¯ä»¥ä½¿ç”¨ <code>rs.setEncoding('utf-8')</code> è®¾ç½®ï¼Œå¯å†™æµå¯ä»¥åœ¨å†™å…¥çš„æ—¶å€™ <code>ws.write(data, 'utf-8')</code>è®¾ç½®ã€‚</p> <p>ï¼ˆ6ï¼‰<strong>åŒå·¥æµå°±åŒæ—¶å…·æœ‰å¯è¯»æµå’Œå¯å†™æµçš„æ–¹æ³•</strong>ï¼Œå¸¸è§çš„æ¯”å¦‚ç”¨æ¥å®ç°èŠå¤©ç³»ç»Ÿ socketã€‚</p> <p>ï¼ˆ7ï¼‰<strong>è½¬æ¢æµç»§æ‰¿è‡ªåŒå·¥æµ</strong>ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<strong>è½¬æ¢æµéœ€è¦è‡ªå·±å®ç°ä¸€ä¸ª transform æ–¹æ³•</strong>ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> stream <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'stream'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> transform <span class="token operator">=</span> stream<span class="token punctuation">.</span><span class="token function">Transform</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// éœ€è¦è‡ªå·±å®ç°ä¸€ä¸ª transform æ–¹æ³•</span>
    <span class="token function">transform</span><span class="token punctuation">(</span><span class="token parameter">chunk<span class="token punctuation">,</span> encoding<span class="token punctuation">,</span> cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// å¤§å°å†™å­—æ¯è½¬æ¢ï¼Œå¹¶ push åˆ°ç¼“å†²åŒº</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>chunk<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// cb();</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
transform<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'D'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'è½¬æ¢æˆå°å†™å­—æ¯ï¼š'</span> <span class="token operator">+</span> transform<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>ï¼ˆ8ï¼‰<strong>é“¾å¼æµï¼Œä¸€èˆ¬ç”¨äºç®¡é“æ“ä½œ</strong>ã€‚</p> <p>ä½¿ç”¨é“¾å¼æµæ¥å‹ç¼©æ–‡ä»¶ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> zlib <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'zlib'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

fs<span class="token punctuation">.</span><span class="token function">createReadStream</span><span class="token punctuation">(</span><span class="token string">'data.txt'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>zlib<span class="token punctuation">.</span><span class="token function">createGzip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>fs<span class="token punctuation">.</span><span class="token function">createWriteStream</span><span class="token punctuation">(</span><span class="token string">'data.txt.gz'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'å‹ç¼©å®Œæˆï¼'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>ğŸ”” <strong>é€è¡Œè¯»å–çš„æœ€ä½³æ–¹æ¡ˆ readline</strong>ã€‚ä¸‹é¢è¿™ä¸ªä¾‹å­å±•ç¤ºäº†é€è¡Œè¯»å–æ—¥å¿—æ–‡ä»¶å¹¶ç»Ÿè®¡è®¿é—®æŸä¸ªç½‘ç«™çš„æ¬¡æ•°ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> readLine <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'readline'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> filename <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'log.txt'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> readStream <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createReadStream</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token comment">// åˆ›å»º readline å¯¹è±¡</span>

<span class="token keyword">const</span> readL <span class="token operator">=</span> readLine<span class="token punctuation">.</span><span class="token function">createInterface</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// è¾“å…¥</span>
    input<span class="token operator">:</span> readStream
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

readL<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'line'</span><span class="token punctuation">,</span> <span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'https://www.baidu.com'</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        num<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

readL<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'close'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'è¯»å–å®Œæˆï¼'</span><span class="token punctuation">,</span> num<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>// log.txt
è®¿é—®æ—¶é—´ï¼š2020.06.25 17:44:30ï¼Œè®¿é—®åœ°å€ï¼šhttps://www.baidu.com
è®¿é—®æ—¶é—´ï¼š2020.06.25 17:44:33ï¼Œè®¿é—®åœ°å€ï¼šhttps://www.baidu.com
è®¿é—®æ—¶é—´ï¼š2020.06.25 17:44:35ï¼Œè®¿é—®åœ°å€ï¼šhttps://www.baidu123.com
è®¿é—®æ—¶é—´ï¼š2020.06.25 17:44:40ï¼Œè®¿é—®åœ°å€ï¼šhttps://www.baidu.com
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p> <p><img src="/assets/img/nodejs11.ebb3f5aa.png" alt="nodejs" title="nodejs"></p> <p>ï¼ˆ9ï¼‰ä¸ºä»€ä¹ˆæµè¦è®¾è®¡æˆé»˜è®¤æ˜¯äºŒè¿›åˆ¶æ ¼å¼çš„å‘¢ï¼Ÿ</p> <p>ä¸»è¦æ˜¯ä¸ºäº†ä¼˜åŒ– IO æ“ä½œï¼Œå› ä¸ºä¸åŒæ–‡ä»¶çš„æ•°æ®æ ¼å¼æ˜¯æœªçŸ¥çš„ï¼Œæœ‰å¯èƒ½æ˜¯å­—ç¬¦ä¸²ã€éŸ³é¢‘ã€ç½‘ç»œåŒ…ç­‰ï¼Œè€ŒäºŒè¿›åˆ¶æ˜¯<strong>é€šç”¨</strong>çš„æ ¼å¼ï¼Œå“ªä¸ªç³»ç»Ÿéƒ½è®¤è¯†ï¼Œå¹¶ä¸”ä½¿ç”¨äºŒè¿›åˆ¶è¿›è¡Œæ•°æ®æµåŠ¨å’Œä¼ è¾“ä¹Ÿæ˜¯<strong>æ•ˆç‡æœ€é«˜</strong>çš„ï¼Œæ‰€ä»¥ç›´æ¥ä½¿ç”¨äºŒè¿›åˆ¶æ˜¯æœ€æ˜æ™ºçš„é€‰æ‹©ã€‚</p> <p>å…¶å®ä¸ä»…ä»…æ˜¯æµé‡‡ç”¨äºŒè¿›åˆ¶çš„æ ¼å¼ï¼Œå…¶ä»–åœ°æ–¹çš„æ–‡ä»¶ä¼ è¾“æ“ä½œç”¨çš„ä¹Ÿæ˜¯è¿™ç§æ–¹å¼ã€‚</p> <h2 id="node-js-net-æ¨¡å—"><a href="#node-js-net-æ¨¡å—" class="header-anchor">#</a> ğŸ–Š Node.js net æ¨¡å—</h2> <p><a href="https://www.runoob.com/nodejs/nodejs-net-module.html" target="_blank" rel="noopener noreferrer">Node.js Net æ¨¡å—<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <ol><li>å¸¸ç”¨çš„è·Ÿä¿¡æ¯äº¤äº’é€šä¿¡ç›¸å…³çš„æ¨¡å—æ˜¯ net å’Œ httpã€‚net æ¨¡å—æ˜¯åŸºäº TCP å°è£…çš„ï¼Œè¿™ä¹Ÿæ˜¯ nodejs çš„æ ¸å¿ƒæ¨¡å—ä¹‹ä¸€ã€‚http æ¨¡å—æœ¬è´¨ä¸Šè¿˜æ˜¯ TCP å±‚çš„ï¼Œåªä¸è¿‡åšäº†æ¯”è¾ƒå¤šçš„æ•°æ®å°è£…ã€‚</li></ol> <p><strong>2. net æ¨¡å—çš„ç»„æˆ</strong></p> <ul><li><p><strong>net.server</strong>ï¼Œå†…éƒ¨æ˜¯é€šè¿‡ socket æ¥å®ç°ä¸å®¢æˆ·ç«¯çš„é€šä¿¡çš„ã€‚</p></li> <li><p><strong>net.socket</strong>ï¼Œç›¸å½“äºæ˜¯æœ¬åœ° socket çš„ node ç‰ˆå®ç°ï¼Œå®ç°äº†å…¨åŒå·¥çš„ stream æ¥å£ã€‚</p></li></ul> <p><strong>3. æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯çš„é€šä¿¡</strong></p> <p>é¦–å…ˆè¦åœ¨æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ä¹‹é—´å»ºç«‹ä¸€æ¡ç®¡é“ï¼Œè¿™æ¡ç®¡é“æ˜¯åŒå‘çš„ã€‚</p> <p>serverï¼ˆæœåŠ¡ç«¯ï¼‰ pipe clientï¼ˆå®¢æˆ·ç«¯ï¼‰</p> <p>ç®¡é“å¦‚ä½•å»ºç«‹å‘¢ï¼Ÿé¦–å…ˆæœåŠ¡ç«¯è¦ç›‘å¬ä¸€ä¸ªç«¯å£ portï¼Œæ¯”å¦‚ï¼š8080ï¼Œç„¶åå®¢æˆ·ç«¯è®¿é—®è¿™ä¸ªç«¯å£ï¼Œä¸¤è€…å°±å¯ä»¥è¿›è¡Œæ•°æ®é€šä¿¡äº†ã€‚</p> <p><strong>4. æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯äº¤äº’çš„ä¾‹å­</strong></p> <p>æœåŠ¡ç«¯ä»£ç </p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * æœåŠ¡ç«¯åˆ›å»ºéœ€è¦3æ­¥
 * 1ã€åˆ›å»ºæœåŠ¡ createServer
 * 2ã€ç›‘å¬ç«¯å£ listenï¼Œç­‰å¾…å®¢æˆ·ç«¯æ¥å…¥
 * 3ã€socket é€šä¿¡ï¼Œç›‘å¬ dataã€close ç­‰äº‹ä»¶å®Œæˆä¸å®¢æˆ·ç«¯äº¤äº’
 */</span>

<span class="token keyword">const</span> net <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'net'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// åˆ›å»º tcp æœåŠ¡</span>
<span class="token keyword">const</span> server <span class="token operator">=</span> net<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ç›‘å¬8000ç«¯å£</span>
server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token string">'8000'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

server<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'listening'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ç›‘å¬æˆåŠŸï¼Œç›‘å¬ç«¯å£å·æ˜¯8000ï¼'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// ç›‘å¬æ–°å»ºç«‹çš„è¿æ¥</span>
server<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'connection'</span><span class="token punctuation">,</span> <span class="token parameter">socket</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æ–°çš„è¿æ¥å»ºç«‹æˆåŠŸï¼'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ç›‘å¬å®¢æˆ·ç«¯ä¼ è¿‡æ¥çš„ä¿¡æ¯</span>
    socket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">,</span> <span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æœåŠ¡ç«¯æ”¶åˆ°å®¢æˆ·ç«¯ä¼ è¿‡æ¥çš„ä¿¡æ¯æ˜¯ï¼š'</span><span class="token punctuation">,</span> data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// è¿”å›ç»™å®¢æˆ·ç«¯ä¸€äº›æ•°æ®</span>
        socket<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'ä½ å¥½ï¼Œæˆ‘æ˜¯æœåŠ¡ç«¯!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        socket<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'å®¢æˆ·ç«¯è¯·å…³é—­è¿æ¥'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// å…³é—­è¿æ¥</span>
    server<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// ç›‘å¬è¿æ¥æ˜¯å¦æ­£å¸¸å…³é—­</span>
server<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'close'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æœåŠ¡ç«¯å·²ç»æ–­å¼€è¿æ¥ï¼'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><p>å®¢æˆ·ç«¯ä»£ç </p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * å®¢æˆ·ç«¯åˆ›å»ºä¹Ÿéœ€è¦3æ­¥
 * 1ã€åˆ›å»º socket
 * 2ã€è¿æ¥æŒ‡å®šçš„ IP ç«¯å£
 * 3ã€ç›‘å¬ dataã€close ç­‰äº‹ä»¶å®Œæˆä¸æœåŠ¡ç«¯äº¤äº’
 */</span>

 <span class="token keyword">const</span> net <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'net'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

 <span class="token comment">// è¿æ¥åˆ°æœåŠ¡ç«¯</span>
 <span class="token comment">// é»˜è®¤æ˜¯ localhostï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥è®¾ç½® IP åœ°å€</span>
 <span class="token keyword">const</span> netSocket <span class="token operator">=</span> net<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">'8000'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

 netSocket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'è¿æ¥å¤±è´¥ï¼'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span>

 netSocket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'connect'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯çš„è¿æ¥å·²ç»å»ºç«‹æˆåŠŸï¼'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    netSocket<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'ä½ å¥½ï¼Œæˆ‘æ˜¯å®¢æˆ·ç«¯ï¼'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// æ¥æ”¶æœåŠ¡ç«¯æ•°æ®</span>
    netSocket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">,</span> <span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡ç«¯çš„æ•°æ®æ˜¯ï¼š'</span><span class="token punctuation">,</span> data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        netSocket<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span>

 netSocket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'å®¢æˆ·ç«¯å…³é—­è¿æ¥æˆåŠŸï¼'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p> <p><img src="/assets/img/nodejs12.3d761707.png" alt="nodejs" title="nodejs"></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/nodejs/nodejsStart.html" class="prev">
        Node.js å…¥é—¨
      </a></span> <span class="next"><a href="/nodejs/express.html">
        Node.js Express æ¡†æ¶
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.83f3402d.js" defer></script><script src="/assets/js/2.a0a69aa9.js" defer></script><script src="/assets/js/16.31912b5c.js" defer></script>
  </body>
</html>
